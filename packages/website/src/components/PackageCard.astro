---
import type { PackageEntry } from '../lib/registry';

interface Props {
  entry: PackageEntry;
  href: string;
  kind: 'component' | 'plugin' | 'preset';
}

const { entry, href, kind } = Astro.props;
const category = entry.category ?? (kind === 'plugin' ? 'plugin' : 'uncategorized');
const status = entry.status ?? 'stable';
---

<a
  href={href}
  class="group block rounded-3xl border border-white/70 bg-white/90 p-5 shadow-card transition-all duration-300 hover:-translate-y-1.5 hover:border-intelligence/40 hover:shadow-glow"
>
  <div class="mb-3 flex items-start justify-between gap-3">
    <p class="text-sm font-semibold text-slate-500">{entry.name}</p>
    <span class="rounded-full bg-slate-100 px-2 py-1 font-mono text-[11px] text-slate-600">v{entry.version}</span>
  </div>

  <h3 class="mb-2 text-lg font-bold text-graphite transition-colors group-hover:text-intelligence">{entry.title}</h3>

  <div class="mb-4 flex flex-wrap gap-2">
    <span class="badge capitalize">{category}</span>
    <span class={`rounded-lg px-2.5 py-1 text-xs font-semibold ${status === 'deprecated' ? 'bg-red-100 text-red-700' : status === 'maintained' ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-100 text-slate-600'}`}>
      {status}
    </span>
  </div>

  {entry.tags && entry.tags.length > 0 && (
    <div class="flex flex-wrap gap-2">
      {entry.tags.slice(0, 4).map((tag) => (
        <span class="rounded-md bg-slate-100/90 px-2 py-1 text-xs font-medium text-slate-600">#{tag}</span>
      ))}
    </div>
  )}
</a>
