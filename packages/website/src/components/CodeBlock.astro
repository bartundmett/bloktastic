---
interface Props {
  code: string;
  language?: string;
  title?: string;
}

const { code, language = 'txt', title } = Astro.props;
const normalizedLanguage = language.toLowerCase();
const isMarkdown = normalizedLanguage === 'md' || normalizedLanguage === 'markdown';
---

<section class="min-w-0 max-w-full overflow-hidden rounded-2xl border border-slate-800/60 bg-slate-950 text-slate-100 shadow-card">
  <header class="flex items-center justify-between border-b border-slate-800 px-4 py-2">
    <p class="text-xs font-semibold uppercase tracking-[0.12em] text-slate-400">{title ?? language}</p>
    <p class="text-[11px] font-mono text-slate-500">{language}</p>
  </header>
  <pre class:list={['max-w-full p-4 text-sm', isMarkdown ? 'overflow-auto whitespace-pre-wrap break-words' : 'overflow-x-auto']}>
    <code class:list={[isMarkdown ? 'whitespace-pre-wrap break-words' : '']}>{code}</code>
  </pre>
</section>
